import{r as n,j as e,R as ce,a as le}from"./client-DvaAtPIX.js";const W=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],H=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],de=()=>{const[x,L]=n.useState(()=>{const t=localStorage.getItem("products");if(t)try{return JSON.parse(t)}catch{return W}return W}),[u,v]=n.useState(()=>{const t=localStorage.getItem("cart");if(t)try{return JSON.parse(t)}catch{return[]}return[]}),[g,I]=n.useState(()=>{const t=localStorage.getItem("coupons");if(t)try{return JSON.parse(t)}catch{return H}return H}),[p,w]=n.useState(null),[b,z]=n.useState(!1),[P,M]=n.useState([]),[$,T]=n.useState(!1),[k,E]=n.useState("products"),[J,C]=n.useState(!1),[q,U]=n.useState(""),[S,_]=n.useState(""),[f,j]=n.useState(null),[o,c]=n.useState({name:"",price:0,stock:0,description:"",discounts:[]}),[l,h]=n.useState({name:"",code:"",discountType:"amount",discountValue:0}),A=(t,s)=>{if(s){const r=x.find(a=>a.id===s);if(r&&N(r)<=0)return"SOLD OUT"}return b?`${t.toLocaleString()}원`:`₩${t.toLocaleString()}`},G=t=>{const{discounts:s}=t.product,{quantity:r}=t,a=s.reduce((m,V)=>r>=V.quantity&&V.rate>m?V.rate:m,0);return u.some(m=>m.quantity>=10)?Math.min(a+.05,.5):a},O=t=>{const{price:s}=t.product,{quantity:r}=t,a=G(t);return Math.round(s*r*(1-a))},D=()=>{let t=0,s=0;return u.forEach(r=>{const a=r.product.price*r.quantity;t+=a,s+=O(r)}),p&&(p.discountType==="amount"?s=Math.max(0,s-p.discountValue):s=Math.round(s*(1-p.discountValue/100))),{totalBeforeDiscount:Math.round(t),totalAfterDiscount:Math.round(s)}},N=t=>{const s=u.find(a=>a.product.id===t.id);return t.stock-(s?.quantity||0)},i=n.useCallback((t,s="success")=>{const r=Date.now().toString();M(a=>[...a,{id:r,message:t,type:s}]),setTimeout(()=>{M(a=>a.filter(d=>d.id!==r))},3e3)},[]),[K,Q]=n.useState(0);n.useEffect(()=>{const t=u.reduce((s,r)=>s+r.quantity,0);Q(t)},[u]),n.useEffect(()=>{localStorage.setItem("products",JSON.stringify(x))},[x]),n.useEffect(()=>{localStorage.setItem("coupons",JSON.stringify(g))},[g]),n.useEffect(()=>{u.length>0?localStorage.setItem("cart",JSON.stringify(u)):localStorage.removeItem("cart")},[u]),n.useEffect(()=>{const t=setTimeout(()=>{_(q)},500);return()=>clearTimeout(t)},[q]);const X=n.useCallback(t=>{if(N(t)<=0){i("재고가 부족합니다!","error");return}v(r=>{const a=r.find(d=>d.product.id===t.id);if(a){const d=a.quantity+1;return d>t.stock?(i(`재고는 ${t.stock}개까지만 있습니다.`,"error"),r):r.map(m=>m.product.id===t.id?{...m,quantity:d}:m)}return[...r,{product:t,quantity:1}]}),i("장바구니에 담았습니다","success")},[u,i,N]),B=n.useCallback(t=>{v(s=>s.filter(r=>r.product.id!==t))},[]),R=n.useCallback((t,s)=>{if(s<=0){B(t);return}const r=x.find(d=>d.id===t);if(!r)return;const a=r.stock;if(s>a){i(`재고는 ${a}개까지만 있습니다.`,"error");return}v(d=>d.map(m=>m.product.id===t?{...m,quantity:s}:m))},[x,B,i,N]),Y=n.useCallback(t=>{if(D().totalAfterDiscount<1e4&&t.discountType==="percentage"){i("percentage 쿠폰은 10,000원 이상 구매 시 사용 가능합니다.","error");return}w(t),i("쿠폰이 적용되었습니다.","success")},[i,D]),Z=n.useCallback(()=>{const t=`ORD-${Date.now()}`;i(`주문이 완료되었습니다. 주문번호: ${t}`,"success"),v([]),w(null)},[i]),ee=n.useCallback(t=>{const s={...t,id:`p${Date.now()}`};L(r=>[...r,s]),i("상품이 추가되었습니다.","success")},[i]),te=n.useCallback((t,s)=>{L(r=>r.map(a=>a.id===t?{...a,...s}:a)),i("상품이 수정되었습니다.","success")},[i]),se=n.useCallback(t=>{L(s=>s.filter(r=>r.id!==t)),i("상품이 삭제되었습니다.","success")},[i]),re=n.useCallback(t=>{if(g.find(r=>r.code===t.code)){i("이미 존재하는 쿠폰 코드입니다.","error");return}I(r=>[...r,t]),i("쿠폰이 추가되었습니다.","success")},[g,i]),ae=n.useCallback(t=>{I(s=>s.filter(r=>r.code!==t)),p?.code===t&&w(null),i("쿠폰이 삭제되었습니다.","success")},[p,i]),ne=t=>{t.preventDefault(),f&&f!=="new"?(te(f,o),j(null)):ee({...o,discounts:o.discounts}),c({name:"",price:0,stock:0,description:"",discounts:[]}),j(null),C(!1)},oe=t=>{t.preventDefault(),re(l),h({name:"",code:"",discountType:"amount",discountValue:0}),T(!1)},ie=t=>{j(t.id),c({name:t.name,price:t.price,stock:t.stock,description:t.description||"",discounts:t.discounts||[]}),C(!0)},y=D(),F=S?x.filter(t=>t.name.toLowerCase().includes(S.toLowerCase())||t.description&&t.description.toLowerCase().includes(S.toLowerCase())):x;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[P.length>0&&e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:P.map(t=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${t.type==="error"?"bg-red-600":t.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[e.jsx("span",{className:"mr-2",children:t.message}),e.jsx("button",{onClick:()=>M(s=>s.filter(r=>r.id!==t.id)),className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id))}),e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!b&&e.jsx("div",{className:"ml-8 flex-1 max-w-md",children:e.jsx("input",{type:"text",value:q,onChange:t=>U(t.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),e.jsxs("nav",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>z(!b),className:`px-3 py-1.5 text-sm rounded transition-colors ${b?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:b?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!b&&e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),u.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:K})]})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:b?e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>E("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${k==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),e.jsx("button",{onClick:()=>E("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${k==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),k==="products"?e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx("button",{onClick:()=>{j("new"),c({name:"",price:0,stock:0,description:"",discounts:[]}),C(!0)},className:"px-4 py-2 bg-gray-900 text-white text-sm rounded-md hover:bg-gray-800",children:"새 상품 추가"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(t.price,t.id)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.stock>10?"bg-green-100 text-green-800":t.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[t.stock,"개"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:t.description||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>ie(t),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>se(t.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},t.id))})]})}),J&&e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:f==="new"?"새 상품 추가":"상품 수정"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:o.name,onChange:t=>c({...o,name:t.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:o.description,onChange:t=>c({...o,description:t.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:o.price===0?"":o.price,onChange:t=>{const s=t.target.value;(s===""||/^\d+$/.test(s))&&c({...o,price:s===""?0:parseInt(s)})},onBlur:t=>{const s=t.target.value;s===""?c({...o,price:0}):parseInt(s)<0&&(i("가격은 0보다 커야 합니다","error"),c({...o,price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:o.stock===0?"":o.stock,onChange:t=>{const s=t.target.value;(s===""||/^\d+$/.test(s))&&c({...o,stock:s===""?0:parseInt(s)})},onBlur:t=>{const s=t.target.value;s===""?c({...o,stock:0}):parseInt(s)<0?(i("재고는 0보다 커야 합니다","error"),c({...o,stock:0})):parseInt(s)>9999&&(i("재고는 9999개를 초과할 수 없습니다","error"),c({...o,stock:9999}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[o.discounts.map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:t.quantity,onChange:r=>{const a=[...o.discounts];a[s].quantity=parseInt(r.target.value)||0,c({...o,discounts:a})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:t.rate*100,onChange:r=>{const a=[...o.discounts];a[s].rate=(parseInt(r.target.value)||0)/100,c({...o,discounts:a})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const r=o.discounts.filter((a,d)=>d!==s);c({...o,discounts:r})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s)),e.jsx("button",{type:"button",onClick:()=>{c({...o,discounts:[...o.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{j(null),c({name:"",price:0,stock:0,description:"",discounts:[]}),C(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:f==="new"?"추가":"수정"})]})]})})]}):e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[g.map(t=>e.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:t.code}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:t.discountType==="amount"?`${t.discountValue.toLocaleString()}원 할인`:`${t.discountValue}% 할인`})})]}),e.jsx("button",{onClick:()=>ae(t.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},t.code)),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:()=>T(!$),className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),$&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰명"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>h({...l,name:t.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:"신규 가입 쿠폰",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"쿠폰 코드"}),e.jsx("input",{type:"text",value:l.code,onChange:t=>h({...l,code:t.target.value.toUpperCase()}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm font-mono",placeholder:"WELCOME2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),e.jsxs("select",{value:l.discountType,onChange:t=>h({...l,discountType:t.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[e.jsx("option",{value:"amount",children:"정액 할인"}),e.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l.discountType==="amount"?"할인 금액":"할인율(%)"}),e.jsx("input",{type:"text",value:l.discountValue===0?"":l.discountValue,onChange:t=>{const s=t.target.value;(s===""||/^\d+$/.test(s))&&h({...l,discountValue:s===""?0:parseInt(s)})},onBlur:t=>{const s=parseInt(t.target.value)||0;l.discountType==="percentage"?s>100?(i("할인율은 100%를 초과할 수 없습니다","error"),h({...l,discountValue:100})):s<0&&h({...l,discountValue:0}):s>1e5?(i("할인 금액은 100,000원을 초과할 수 없습니다","error"),h({...l,discountValue:1e5})):s<0&&h({...l,discountValue:0})},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",placeholder:l.discountType==="amount"?"5000":"10",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:"쿠폰 생성"})]})]})})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",x.length,"개 상품"]})]}),F.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',S,'"에 대한 검색 결과가 없습니다.']})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map(t=>{const s=N(t);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.isRecommended&&e.jsx("span",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"BEST"}),t.discounts.length>0&&e.jsxs("span",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded",children:["~",Math.max(...t.discounts.map(r=>r.rate))*100,"%"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:A(t.price,t.id)}),t.discounts.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[t.discounts[0].quantity,"개 이상 구매시 할인 ",t.discounts[0].rate*100,"%"]})]}),e.jsxs("div",{className:"mb-3",children:[s<=5&&s>0&&e.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",s,"개 남음"]}),s>5&&e.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",s,"개"]})]}),e.jsx("button",{onClick:()=>X(t),disabled:s<=0,className:`w-full py-2 px-4 rounded-md font-medium transition-colors ${s<=0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-900 text-white hover:bg-gray-800"}`,children:s<=0?"품절":"장바구니 담기"})]})]},t.id)})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:u.map(t=>{const s=O(t),r=t.product.price*t.quantity,a=s<r,d=a?Math.round((1-s/r)*100):0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:t.product.name}),e.jsx("button",{onClick:()=>B(t.product.id),className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>R(t.product.id,t.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:t.quantity}),e.jsx("button",{onClick:()=>R(t.product.id,t.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100",children:e.jsx("span",{className:"text-xs",children:"+"})})]}),e.jsxs("div",{className:"text-right",children:[a&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",d,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(s).toLocaleString(),"원"]})]})]})]},t.product.id)})})]}),u.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),g.length>0&&e.jsxs("select",{className:"w-full text-sm border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-blue-500",value:p?.code||"",onChange:t=>{const s=g.find(r=>r.code===t.target.value);s?Y(s):w(null)},children:[e.jsx("option",{value:"",children:"쿠폰 선택"}),g.map(t=>e.jsxs("option",{value:t.code,children:[t.name," (",t.discountType==="amount"?`${t.discountValue.toLocaleString()}원`:`${t.discountValue}%`,")"]},t.code))]})]}),e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[y.totalBeforeDiscount.toLocaleString(),"원"]})]}),y.totalBeforeDiscount-y.totalAfterDiscount>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(y.totalBeforeDiscount-y.totalAfterDiscount).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[y.totalAfterDiscount.toLocaleString(),"원"]})]})]}),e.jsxs("button",{onClick:Z,className:"w-full mt-4 py-3 bg-yellow-400 text-gray-900 rounded-md font-medium hover:bg-yellow-500 transition-colors",children:[y.totalAfterDiscount.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]})]})]})})]})})]})};ce.createRoot(document.getElementById("root")).render(e.jsx(le.StrictMode,{children:e.jsx(de,{})}));
